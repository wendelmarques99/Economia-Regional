ano = paste0(ano, "-01-01") %>% as.Date()
)
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao))
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
rio::export(., "pib_percapita_regioes.xlsx")
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
View()
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
tabela = get_sidra(api='/t/6381/n1/all/v/4099/p/all/d/v4099%201')
tabela
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
View()
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1)
httr::GET("https://apisidra.ibge.gov.br/values/t/7439/n2/all/v/10770/p/last%201") %>%
httr::content(as = "text")
httr::GET("https://apisidra.ibge.gov.br/values/t/7439/n2/all/v/10770/p/last%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON()
httr::GET("https://apisidra.ibge.gov.br/values/t/7439/n2/all/v/10770/p/last%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::mutate(
Valor = as.numeric(Valor)
)
httr::GET("https://apisidra.ibge.gov.br/values/t/7439/n2/all/v/10770/p/last%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON()
httr::GET("https://apisidra.ibge.gov.br/values/t/7439/n2/all/v/10770/p/last%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
)
httr::GET("https://apisidra.ibge.gov.br/values/t/6894/n1/all/n2/all/v/all/p/last%201/c58/95253/d/v10004%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
) %>%
dplyr::mutate(
total = sum(V),
porcentagem =
)
httr::GET("https://apisidra.ibge.gov.br/values/t/6894/n2/all/v/all/p/last%201/c58/95253/d/v10004%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
) %>%
dplyr::mutate(
total = sum(V),
porcentagem =
)
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1)
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
library(WDI)
install.packages("WDI")
library(WDI)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
GDP
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
dat <- iso3166
dat <- rename(dat, "iso-a3" = a3 )
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
GDP_Filter_Integer = as.integer(GDP_Filter$GDP_Growth)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
dat <- iso3166
dat <- "iso3166"
dat <- rename(dat, "iso-a3" = a3 )
library(dplyr)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
dat <- "iso3166"
dat <- rename(dat, "iso-a3" = a3 )
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
dat <- "iso3166"
dat <- rename(dat, "iso-a3" = a3 )
install.packages("maps")
library(highcharter)
library(maps)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
iso3166
dat <- iso3166
dat <- rename(dat, "iso-a3" = a3 )
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
GDP_Filter_Integer = as.integer(GDP_Filter$GDP_Growth)
dat$GDP <- GDP_Filter$GDP_Growth
library(WDI)
library(dplyr)
library(highcharter)
library(maps)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
dat <- iso3166
dat <- rename(dat, "iso-a3" = a3 )
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
GDP_Filter_Integer = as.integer(GDP_Filter$GDP_Growth)
dat$GDP <- GDP_Filter$GDP_Growth
GDP_Filter$GDP_Growth
dat$GDP
dat
GDP_Filter
nrow(GDP_Filter)
nrow(dat)
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
Countries_iso3
length(Countries_iso3)
dat <- iso3166
dat <- rename(dat, "iso-a3" = a3 )
dat
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
GDP_Filter_Integer
GDP_Filter_Integer = as.integer(GDP_Filter$GDP_Growth)
dat$GDP <- GDP_Filter$GDP_Growth
dat$GDP <- GDP_Filter$GDP_Growth[-1]
GDP_Filter$GDP_Growth[-1]
GDP_Filter$GDP_Growth
dat$GDP[-1] <- GDP_Filter$GDP_Growth
dat
GDP_Filter$GDP_Growth
GDP_Filter
GDP <- WDI(
country = "all",
indicator = "NY.GDP.MKTP.KD.ZG",
start = 2019,
end = 2019,
extra = FALSE,
cache = NULL)
names(GDP)[names(GDP) == "NY.GDP.MKTP.KD.ZG"] <- "GDP_Growth"
Countries  <- c("Brazil","Argentina","Chile","Russian Federation","United States","China","Germany","Australia","South Africa","Canada","India","Egypt, Arab Rep.","United Kingdom")
GDP_Filter <- GDP[GDP$country %in% Countries ,]
Countries_iso3  <- c("BRA","ARG","CHL","RUS", "USA","CHN","DEU","AUS","ZAF","CAN","IND","EGY","GBR")
dat <- iso3166
dat
dat <- rename(dat, "iso-a3" = a3 )
dat = dat[dat$`iso-a3` %in% Countries_iso3 ,]
dat
distinct(dat, a2)
dat <- distinct(dat, a2, .keep_all = TRUE)
GDP_Filter_Integer = as.integer(GDP_Filter$GDP_Growth)
dat$GDP <- GDP_Filter$GDP_Growth
map = "custom/world-highres3",
data = dat,
joinBy = "iso-a3",
value = "GDP",
showInLegend = FALSE,
nullColor = "#DADADA",
download_map_data = TRUE) %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_legend(align = "center",
verticalAlign = "top",
layout = "horizontal",
x = 100,
y = 0) %>%
hc_title(text = "GDP Growth in 2019 for selected Countries")
hc<-hcmap(
map = "custom/world-highres3",
data = dat,
joinBy = "iso-a3",
value = "GDP",
showInLegend = FALSE,
nullColor = "#DADADA",
download_map_data = TRUE) %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_legend(align = "center",
verticalAlign = "top",
layout = "horizontal",
x = 100,
y = 0) %>%
hc_title(text = "GDP Growth in 2019 for selected Countries")
hcmap(
map = "custom/world-highres3",
data = dat,
joinBy = "iso-a3",
value = "GDP",
showInLegend = FALSE,
nullColor = "#DADADA",
download_map_data = TRUE) %>%
hc_mapNavigation(enabled = TRUE) %>%
hc_legend(align = "center",
verticalAlign = "top",
layout = "horizontal",
x = 100,
y = 0) %>%
hc_title(text = "GDP Growth in 2019 for selected Countries")
install.packages("brazilmaps")
install.packages("brazilmaps")
install.packages("brazilmaps")
ap <- available.packages()
"brazilmaps" %in% ap
install.packages("geobr")
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
)
httr::GET("https://apisidra.ibge.gov.br/values/t/6894/n2/all/v/all/p/last%201/c58/95253/d/v10004%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
) %>%
dplyr::mutate(
total = sum(V),
porcentagem =
)
httr::GET("https://apisidra.ibge.gov.br/values/t/6894/n2/all/v/all/p/last%201/c58/95253/d/v10004%201") %>%
httr::content(as = "text") %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
) %>%
dplyr::mutate(
total = sum(V),
porcentagem =
) %>%
rio::export(., "gini_regiao.xlsx")
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n2/all/v/10681/p/last%201/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
) %>%
rio::export(., "desempregfo_regiao.xlsx")
httr::GET("https://apisidra.ibge.gov.br/values/t/7435/n3/all/v/10681/p/2020/d/v10681%203") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()  %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
)
# Porcentagem dos estados -------------------------------------------------
porcentagem_dos_estados <- httr::GET("https://apisidra.ibge.gov.br/values/t/5434/g/103/v/4090/p/last%201/c693/33355") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON() %>%
dplyr::filter(
NN == "Unidade da Federação"
) %>%
dplyr::mutate(
V = V %>% as.numeric()
) %>%
dplyr::mutate(
Total = sum(V)
) %>%
dplyr::mutate(
Porcentagem = V/Total
) %>%
dplyr::arrange(
dplyr::desc(Porcentagem)
)
estados <- porcentagem_dos_estados$D1N[1:10]
porcentagens <- porcentagem_dos_estados$Porcentagem[1:10] *100
estados
cat(estados)
cat(porcentagens)
PIB_PERCAPITA <- httr::GET("https://apisidra.ibge.gov.br/values/t/1194/n3/all/v/93,2363/p/2010/d/v2363%200") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON()
PIB_PERCAPITA %>%
dplyr::filter(
MN == "Reais"
) %>% dplyr::mutate(
V = as.numeric(V)
) %>%
purrr::pluck(5) %>%
sum()
PIB_PERCAPITA <- httr::GET("https://apisidra.ibge.gov.br/values/t/1194/n1/all/n3/all/v/93,2363/p/2010/d/v2363%200") %>%
httr::content(as = "text")  %>%
jsonlite::fromJSON() %>%
dplyr::slice(-1) %>%
dplyr::mutate(
V = as.numeric(V)
)
pib_percapita_brasil_75 <- PIB_PERCAPITA %>%
dplyr::filter(D1N == "Brasil") %>%
dplyr::filter(
MN == "Reais"
) %>%
dplyr::pull(V) * 0.75
pib_percapita_brasil_75
pop_brasil <- PIB_PERCAPITA %>%
dplyr::filter(D1N == "Brasil") %>%
dplyr::filter(
MN == "Pessoas"
) %>%
dplyr::pull(V)
estados_menor_que_75_pibpercapita_br <- PIB_PERCAPITA %>%
dplyr::filter(D1N != "Brasil") %>%
dplyr::filter(
MN == "Reais",
V < pib_percapita_brasil_75
) %>%
dplyr::pull( D1N )
estados_menor_que_75_pibpercapita_br
cat(estados_menor_que_75_pibpercapita_br)
pop_estados_menor_75_pibpercapita <- PIB_PERCAPITA %>%
dplyr::filter(D1N %in% estados_menor_que_75_pibpercapita_br) %>%
dplyr::filter(
MN == "Pessoas"
) %>%
dplyr::pull(V) %>%
sum()
## PORCENTAGEM DOS ESTADOS EM RELACAO AO BR
pop_estados_menor_75_pibpercapita/pop_brasil *100
## PORCENTAGEM DOS ESTADOS EM RELACAO AO BR
pop_estados_menor_75_pibpercapita/pop_brasil *100
tabelas <- list.files()[2:6]
ler_arquivos <- function(x){
readxl::read_excel(x) %>%
dplyr::select(-c(1, 2)) %>%
tidyr::pivot_longer(cols = -1) %>%
janitor::clean_names() %>%
dplyr::rename(
"Ano" = "name",
"PIB PERCAPITA" = "value"
)
}
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
tabelas <- list.files()[2:6]
tabelas
ler_arquivos <- function(x){
readxl::read_excel(x) %>%
dplyr::select(-c(1, 2)) %>%
tidyr::pivot_longer(cols = -1) %>%
janitor::clean_names() %>%
dplyr::rename(
"Ano" = "name",
"PIB PERCAPITA" = "value"
)
}
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2)
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2) +
labs(title = "PIB PER CAOITA REGIOES")
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2) +
ggplot2::labs(title = "PIB PER CAOITA REGIOES")
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2) +
ggplot2::labs(title = "PIB PER CAPITA REGIOES")
# 4 questao
purrr::map_dfr(ler_arquivos, .x = tabelas) %>%
janitor::clean_names() %>%
dplyr::mutate(
ano = paste0(ano, "-01-01") %>% as.Date()
) %>%
ggplot2::ggplot() +
ggplot2::geom_line(ggplot2::aes(x = ano, y = pib_percapita, color = regiao), size = 2) +
ggplot2::labs(title = "PIB PER CAPITA")
